{% if forecast %}
  {% set numSteps = forecast | calcNumSteps %}
  {% set currentStep = 0 %}

  <div class="horizontal-forecast">
    {% if config.ignoreToday %}
      {% set forecast = forecast.splice(1) %}
    {% endif %}
    {% set forecast = forecast.slice(0, numSteps) %}

    {% for f in forecast %}
      <div class="forecast-card"
        {% if config.fade %}style="opacity: {{ currentStep | opacity(numSteps) }};"{% endif %}>
        
        <div class="day-label">
          {% if (currentStep == 0) and not config.ignoreToday and not config.absoluteDates %}
            {{ "TODAY" | translate }}
          {% elif (currentStep == 1) and not config.ignoreToday and not config.absoluteDates %}
            {{ "TOMORROW" | translate }}
          {% else %}
            {{ f.date.format("ddd") }}
          {% endif %}
        </div>

        <div class="icon">
          <span class="wi weathericon wi-{{ f.weatherType }}"></span>
        </div>

        <div class="temp">
          <span class="high">{{ f.maxTemperature | roundValue | unit("temperature") | decimalSymbol }}</span>
          <span class="low">{{ f.minTemperature | roundValue | unit("temperature") | decimalSymbol }}</span>
        </div>

        {% if config.showPrecipitationAmount %}
          <div class="precip">{{ f.precipitationAmount | unit("precip", f.precipitationUnits) }}</div>
        {% endif %}

        {% if config.showPrecipitationProbability %}
          <div class="precip-prob">{{ f.precipitationProbability }}%</div>
        {% endif %}

        {% if config.showUVIndex %}
          <div class="uv-index">
            <span class="wi weathericon wi-hot"></span> {{ f.uv_index }}
          </div>
        {% endif %}
      </div>
      {% set currentStep = currentStep + 1 %}
    {% endfor %}
  </div>
{% else %}
  <div class="dimmed light small">{{ "LOADING" | translate }}</div>
{% endif %}